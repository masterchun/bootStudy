<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style type="text/css">
.logincontainer {
	margin: 0px auto;
	width: 400px;
}
</style>
</head>
<body>
<div id="main-wrapper">
	<div class="logincontainer">
		<div class="row">
			<h3 style="margin-top: 100px">로그인</h3>
			<table class="table">
				<tbody>
					<tr>
						<td>
							ID : <input type=text class="input-sm" size=10 ref="id" v-model="id">
						</td>
					</tr>
					<tr>
						<td>
							PW : <input type=password class="input-sm" size=10 ref="pwd" v-model="pwd">
						</td>
					</tr>
					<tr>
						<td>
							<button class="btn-sm btn-primary" type="button" @click="login()">로그인</button>
							<button class="btn-sm btn-primary" type="button" onclick="javascript:history.back()">취소</button>
						</td>
					</tr>
				</tbody>
			</table>
			
		</div>
	</div>
</div>
	<script>
		const logApp = Vue.createApp({
			data() {
				return {
					id: '',
					pwd: '',
					vo: {}
				}
			},
			
			methods: {
				// 로그인
				login() {
					if(this.id == "") {
						this.$refs.id.focus()
						return
					}
					
					if(this.pwd == "") {
						this.$refs.pwd.focus
						return
					}
					axios.get('http://localhost/member/login_vue/', {
						params: {
							id: this.id,
							pwd: this.pwd
						}
					}).then(response => {
						console.log(response.data)
						this.vo = response.data
						if(response.data.msg === 'OK') {
							location.href = "/"
						} else if(response.data.msg === 'NOID') {
							alert("아이디가 존재하지 않습니다")
							this.id = ""
							this.pwd = ""
							this.$refs.id.focus()
						} else if(response.data.msg == "NOPWD") {
							alert("비밀번호가 틀립니다")
							this.pwd=""
							this.$refs.pwd.focus()
						}
					})
					
				},
				// 로그아웃
				logout() {
					axios.get('http://localhost/member/logout_vue/')
					.then(response => {
						if(response.data === 'yes') {
							location.href = "/"
						}
					})
				}
			}
		})
		logApp.config.compilerOptions.delimiters = ['((', '))']
		logApp.mount("#main-wrapper")
	</script>
</body>
</html>